{"ast":null,"code":"import { onMounted, computed } from 'vue';\nimport { useAuthStore } from '@/stores/auth.js';\nimport GlobalSearch from './GlobalSearch.vue';\nexport default {\n  __name: 'AppHeader',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const authStore = useAuthStore();\n    const handleLogout = () => {\n      authStore.logout();\n    };\n\n    // Вычисляемое свойство для отображения данных пользователя\n    const displayUser = computed(() => {\n      if (!authStore.user) return {\n        name: '',\n        surname: '',\n        email: '',\n        username: ''\n      };\n\n      // Для администраторов\n      if (authStore.user.role === 'admin') {\n        return {\n          name: '',\n          surname: '',\n          email: authStore.user.email || '',\n          username: authStore.user.username || 'admin'\n        };\n      }\n\n      // Для партнеров\n      if (authStore.user.role === 'partner') {\n        return {\n          name: authStore.user.name || '',\n          surname: '',\n          // У партнеров обычно нет surname в отдельном поле\n          email: authStore.user.email || '',\n          username: authStore.user.alias || ''\n        };\n      }\n      return {\n        name: '',\n        surname: '',\n        email: '',\n        username: ''\n      };\n    });\n    onMounted(() => {\n      console.log('AppHeader mounted, user:', authStore.user);\n    });\n    const __returned__ = {\n      authStore,\n      handleLogout,\n      displayUser,\n      onMounted,\n      computed,\n      get useAuthStore() {\n        return useAuthStore;\n      },\n      GlobalSearch\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","computed","useAuthStore","GlobalSearch","authStore","handleLogout","logout","displayUser","user","name","surname","email","username","role","alias","console","log"],"sources":["/Users/vadim/Desktop/freedom-group/frontend/src/components/AppHeader.vue"],"sourcesContent":["<script setup>\nimport { onMounted, computed } from 'vue'\nimport { useAuthStore } from '@/stores/auth.js'\nimport GlobalSearch from './GlobalSearch.vue'\n\nconst authStore = useAuthStore()\n\nconst handleLogout = () => {\n  authStore.logout()\n}\n\n// Вычисляемое свойство для отображения данных пользователя\nconst displayUser = computed(() => {\n  if (!authStore.user) return { name: '', surname: '', email: '', username: '' }\n  \n  // Для администраторов\n  if (authStore.user.role === 'admin') {\n    return {\n      name: '',\n      surname: '',\n      email: authStore.user.email || '',\n      username: authStore.user.username || 'admin'\n    }\n  }\n  \n  // Для партнеров\n  if (authStore.user.role === 'partner') {\n    return {\n      name: authStore.user.name || '',\n      surname: '', // У партнеров обычно нет surname в отдельном поле\n      email: authStore.user.email || '',\n      username: authStore.user.alias || ''\n    }\n  }\n  \n  return { name: '', surname: '', email: '', username: '' }\n})\n\nonMounted(() => {\n  console.log('AppHeader mounted, user:', authStore.user)\n})\n</script>\n\n<template>\n  <header>\n    <div class=\"wrap-logo\" @click=\"$router.push({ name: 'proekts' })\">\n      Металл трекер\n    </div>\n    <div class=\"wrap-search\">\n      <GlobalSearch />\n    </div>\n    <div class=\"user-section\">\n      <span class=\"user\" v-if=\"displayUser && displayUser.name && displayUser.surname\">\n        {{ displayUser.name }} {{ displayUser.surname }}\n      </span>\n      <span class=\"user\" v-else-if=\"authStore.isAuthenticated && displayUser && displayUser.email\">\n        {{ displayUser.email }}\n      </span>\n      <span class=\"user\" v-else-if=\"authStore.isAuthenticated\">\n        Пользователь\n      </span>\n      <span class=\"user\" v-else>\n        Гость\n      </span>\n      <button class=\"logout-btn\" @click=\"handleLogout\" title=\"Выйти\" v-if=\"authStore.isAuthenticated\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n          <path d=\"M6 2H3C2.45 2 2 2.45 2 3V13C2 13.55 2.45 14 3 14H6\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n          <path d=\"M11 11L14 8L11 5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M14 8H6\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n        </svg>\n      </button>\n    </div>\n  </header>\n</template>\n\n<style scoped>\nheader {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 48px;\n  padding: 16px 40px;\n}\n\n.wrap-logo {\n  font-weight: 500;\n  font-size: 24px;\n  cursor: pointer;\n}\n\n.wrap-search {\n  display: flex;\n  align-items: center;\n  position: relative;\n  flex: 1;\n  max-width: 400px;\n}\n\n.user {\n  font-weight: 500;\n  font-size: 16px;\n}\n\n.user-section {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.logout-btn {\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #8C93A6;\n  padding: 8px;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.logout-btn:hover {\n  background-color: #F8F9FC;\n  color: #1233EA;\n}\n\n.user-section {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.logout-btn {\n  background: none;\n  border: none;\n  color: #8C93A6;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.logout-btn:hover {\n  background-color: #f5f5f5;\n  color: #1233ea;\n}\n\n.wrap-search {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 8px;\n  background-color: #F8F9FC;\n  border: 1px solid #F1F2F4;\n  padding: 16px;\n}\n\n.wrap-search input {\n  flex: 1;\n}\n\nlabel {\n  cursor: pointer;\n}\n\n/* Адаптивность для планшетов */\n@media (max-width: 768px) {\n  header {\n    gap: 24px;\n    padding: 12px 20px;\n  }\n  \n  .wrap-logo {\n    font-size: 20px;\n  }\n  \n  .user {\n    font-size: 14px;\n  }\n  \n  .user-section {\n    gap: 8px;\n  }\n  \n  .logout-btn {\n    padding: 6px;\n  }\n  \n  .wrap-search {\n    padding: 12px;\n  }\n}\n\n/* Адаптивность для мобильных */\n@media (max-width: 480px) {\n  header {\n    gap: 16px;\n    padding: 8px 16px;\n  }\n  \n  .wrap-logo {\n    font-size: 18px;\n  }\n  \n  .user {\n    font-size: 12px;\n    white-space: nowrap;\n  }\n  \n  .user-section {\n    gap: 6px;\n  }\n  \n  .logout-btn {\n    padding: 4px;\n  }\n  \n  .logout-btn svg {\n    width: 14px;\n    height: 14px;\n  }\n  \n  .wrap-search {\n    display: none;\n  }\n}\n</style>"],"mappings":"AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,KAAI;AACxC,SAASC,YAAY,QAAQ,kBAAiB;AAC9C,OAAOC,YAAY,MAAM,oBAAmB;;;;;;;IAE5C,MAAMC,SAAS,GAAGF,YAAY,CAAC;IAE/B,MAAMG,YAAY,GAAGA,CAAA,KAAM;MACzBD,SAAS,CAACE,MAAM,CAAC;IACnB;;IAEA;IACA,MAAMC,WAAW,GAAGN,QAAQ,CAAC,MAAM;MACjC,IAAI,CAACG,SAAS,CAACI,IAAI,EAAE,OAAO;QAAEC,IAAI,EAAE,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,QAAQ,EAAE;MAAG;;MAE7E;MACA,IAAIR,SAAS,CAACI,IAAI,CAACK,IAAI,KAAK,OAAO,EAAE;QACnC,OAAO;UACLJ,IAAI,EAAE,EAAE;UACRC,OAAO,EAAE,EAAE;UACXC,KAAK,EAAEP,SAAS,CAACI,IAAI,CAACG,KAAK,IAAI,EAAE;UACjCC,QAAQ,EAAER,SAAS,CAACI,IAAI,CAACI,QAAQ,IAAI;QACvC;MACF;;MAEA;MACA,IAAIR,SAAS,CAACI,IAAI,CAACK,IAAI,KAAK,SAAS,EAAE;QACrC,OAAO;UACLJ,IAAI,EAAEL,SAAS,CAACI,IAAI,CAACC,IAAI,IAAI,EAAE;UAC/BC,OAAO,EAAE,EAAE;UAAE;UACbC,KAAK,EAAEP,SAAS,CAACI,IAAI,CAACG,KAAK,IAAI,EAAE;UACjCC,QAAQ,EAAER,SAAS,CAACI,IAAI,CAACM,KAAK,IAAI;QACpC;MACF;MAEA,OAAO;QAAEL,IAAI,EAAE,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,QAAQ,EAAE;MAAG;IAC1D,CAAC;IAEDZ,SAAS,CAAC,MAAM;MACde,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEZ,SAAS,CAACI,IAAI;IACxD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}