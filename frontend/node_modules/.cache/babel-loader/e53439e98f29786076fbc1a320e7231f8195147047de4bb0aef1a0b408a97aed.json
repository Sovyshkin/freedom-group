{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport AppLoader from '@/components/AppLoader.vue';\nimport AppNotifications from '@/components/AppNotifications.vue';\nimport { useAuthStore } from '@/stores/auth';\nimport { useNotificationStore } from '@/stores/notifications';\nexport default {\n  __name: 'LoginPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const notificationStore = useNotificationStore();\n\n    // Reactive data\n    const loading = ref(false);\n    const showPassword = ref(false);\n    const loginType = ref('partner'); // 'partner' or 'admin'\n\n    const formData = reactive({\n      login: '',\n      password: ''\n    });\n    const errors = ref({});\n\n    // Methods\n    const validateForm = () => {\n      errors.value = {};\n      if (!formData.login) {\n        errors.value.login = loginType.value === 'admin' ? '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' : '–õ–æ–≥–∏–Ω –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω';\n      }\n      if (!formData.password) {\n        errors.value.password = '–ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω';\n      }\n      return Object.keys(errors.value).length === 0;\n    };\n    const login = async () => {\n      if (!validateForm()) return;\n      loading.value = true;\n      try {\n        const endpoint = loginType.value === 'admin' ? '/auth/admin/login' : '/auth/login';\n        const loginData = loginType.value === 'admin' ? {\n          username: formData.login,\n          password: formData.password\n        } : {\n          alias: formData.login,\n          password: formData.password\n        };\n        await authStore.login(endpoint, loginData);\n\n        // Redirect based on user role\n        if (authStore.user.role === 'admin') {\n          router.push('/admin');\n        } else {\n          router.push('/dashboard');\n        }\n        notificationStore.addNotification({\n          type: 'success',\n          message: '–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É!'\n        });\n      } catch (error) {\n        console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);\n        let errorMessage = '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É';\n        if (error.response?.status === 401) {\n          errorMessage = '–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ';\n        } else if (error.response?.status === 403) {\n          errorMessage = error.response.data?.message || '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω';\n        } else if (error.response?.status === 429) {\n          errorMessage = error.response.data?.message || '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞';\n        } else if (error.response?.data?.message) {\n          errorMessage = error.response.data.message;\n        }\n        notificationStore.addNotification({\n          type: 'error',\n          message: errorMessage\n        });\n      } finally {\n        loading.value = false;\n      }\n    };\n    const __returned__ = {\n      router,\n      authStore,\n      notificationStore,\n      loading,\n      showPassword,\n      loginType,\n      formData,\n      errors,\n      validateForm,\n      login,\n      ref,\n      reactive,\n      get useRouter() {\n        return useRouter;\n      },\n      AppLoader,\n      AppNotifications,\n      get useAuthStore() {\n        return useAuthStore;\n      },\n      get useNotificationStore() {\n        return useNotificationStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","useRouter","AppLoader","AppNotifications","useAuthStore","useNotificationStore","router","authStore","notificationStore","loading","showPassword","loginType","formData","login","password","errors","validateForm","value","Object","keys","length","endpoint","loginData","username","alias","user","role","push","addNotification","type","message","error","console","errorMessage","response","status","data"],"sources":["/Users/vadim/Desktop/freedom-group/frontend/src/views/auth/LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"container\">\n      <div class=\"login-card\">\n        <div class=\"logo\">\n          <h1>FREEDOM GROUP</h1>\n          <p>–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞</p>\n        </div>\n        \n        <form @submit.prevent=\"login\" class=\"login-form\">\n          <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>\n          \n          <!-- Role selection -->\n          <div class=\"role-tabs\">\n            <button \n              type=\"button\"\n              @click=\"loginType = 'partner'\"\n              :class=\"['role-tab', { active: loginType === 'partner' }]\"\n            >\n              –ü–∞—Ä—Ç–Ω–µ—Ä\n            </button>\n            <button \n              type=\"button\"\n              @click=\"loginType = 'admin'\"\n              :class=\"['role-tab', { active: loginType === 'admin' }]\"\n            >\n              –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä\n            </button>\n          </div>\n          \n          <div class=\"form-group\">\n            <label :for=\"loginType === 'admin' ? 'username' : 'alias'\">\n              {{ loginType === 'admin' ? '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' : '–õ–æ–≥–∏–Ω' }}\n            </label>\n            <input\n              :id=\"loginType === 'admin' ? 'username' : 'alias'\"\n              v-model=\"formData.login\"\n              type=\"text\"\n              required\n              :placeholder=\"loginType === 'admin' ? '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' : '–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω'\"\n              :class=\"{ error: errors.login }\"\n            />\n            <div v-if=\"errors.login\" class=\"error-message\">{{ errors.login }}</div>\n          </div>\n          \n          <div class=\"form-group\">\n            <label for=\"password\">–ü–∞—Ä–æ–ª—å</label>\n            <div class=\"password-input\">\n              <input\n                id=\"password\"\n                v-model=\"formData.password\"\n                :type=\"showPassword ? 'text' : 'password'\"\n                required\n                placeholder=\"–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å\"\n                :class=\"{ error: errors.password }\"\n              />\n              <button \n                type=\"button\" \n                @click=\"showPassword = !showPassword\"\n                class=\"password-toggle\"\n              >\n                {{ showPassword ? 'üôà' : 'üëÅÔ∏è' }}\n              </button>\n            </div>\n            <div v-if=\"errors.password\" class=\"error-message\">{{ errors.password }}</div>\n          </div>\n          \n          <div class=\"form-actions\">\n            <button \n              type=\"submit\" \n              :disabled=\"loading\"\n              class=\"btn btn-primary btn-full\"\n            >\n              <AppLoader v-if=\"loading\" size=\"small\" />\n              {{ loading ? '–í—Ö–æ–¥...' : '–í–æ–π—Ç–∏' }}\n            </button>\n          </div>\n          \n          <div v-if=\"loginType === 'partner'\" class=\"help-links\">\n            <router-link to=\"/forgot-password\">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</router-link>\n          </div>\n        </form>\n      </div>\n    </div>\n    \n    <!-- Notifications -->\n    <AppNotifications />\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport AppLoader from '@/components/AppLoader.vue'\nimport AppNotifications from '@/components/AppNotifications.vue'\nimport { useAuthStore } from '@/stores/auth'\nimport { useNotificationStore } from '@/stores/notifications'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\nconst notificationStore = useNotificationStore()\n\n// Reactive data\nconst loading = ref(false)\nconst showPassword = ref(false)\nconst loginType = ref('partner') // 'partner' or 'admin'\n\nconst formData = reactive({\n  login: '',\n  password: ''\n})\n\nconst errors = ref({})\n\n// Methods\nconst validateForm = () => {\n  errors.value = {}\n  \n  if (!formData.login) {\n    errors.value.login = loginType.value === 'admin' ? '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' : '–õ–æ–≥–∏–Ω –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω'\n  }\n  \n  if (!formData.password) {\n    errors.value.password = '–ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω'\n  }\n  \n  return Object.keys(errors.value).length === 0\n}\n\nconst login = async () => {\n  if (!validateForm()) return\n  \n  loading.value = true\n  \n  try {\n    const endpoint = loginType.value === 'admin' ? '/auth/admin/login' : '/auth/login'\n    const loginData = loginType.value === 'admin' \n      ? { username: formData.login, password: formData.password }\n      : { alias: formData.login, password: formData.password }\n    \n    await authStore.login(endpoint, loginData)\n    \n    // Redirect based on user role\n    if (authStore.user.role === 'admin') {\n      router.push('/admin')\n    } else {\n      router.push('/dashboard')\n    }\n    \n    notificationStore.addNotification({\n      type: 'success',\n      message: '–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É!'\n    })\n    \n  } catch (error) {\n    console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error)\n    \n    let errorMessage = '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É'\n    \n    if (error.response?.status === 401) {\n      errorMessage = '–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'\n    } else if (error.response?.status === 403) {\n      errorMessage = error.response.data?.message || '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω'\n    } else if (error.response?.status === 429) {\n      errorMessage = error.response.data?.message || '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞'\n    } else if (error.response?.data?.message) {\n      errorMessage = error.response.data.message\n    }\n    \n    notificationStore.addNotification({\n      type: 'error',\n      message: errorMessage\n    })\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n<style scoped>\n.login-page {\n  min-height: 100vh;\n  background-color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  font-family: 'Inter', sans-serif;\n  font-weight: 500;\n}\n\n.container {\n  width: 100%;\n  max-width: 400px;\n}\n\n.login-card {\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.logo {\n  background-color: #1233EA;\n  color: white;\n  text-align: center;\n  padding: 40px 20px;\n}\n\n.logo h1 {\n  margin: 0 0 8px;\n  font-size: 2rem;\n  font-weight: 700;\n}\n\n.logo p {\n  margin: 0;\n  opacity: 0.9;\n  font-size: 1.1rem;\n}\n\n.login-form {\n  padding: 30px;\n}\n\n.login-form h2 {\n  margin: 0 0 24px;\n  color: #2c3e50;\n  font-size: 1.5rem;\n  text-align: center;\n}\n\n.role-tabs {\n  display: flex;\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 4px;\n  margin-bottom: 24px;\n}\n\n.role-tab {\n  flex: 1;\n  padding: 8px 16px;\n  border: none;\n  background: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  color: #6c757d;\n  transition: all 0.2s;\n}\n\n.role-tab.active {\n  background: white;\n  color: #667eea;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 6px;\n  font-weight: 500;\n  color: #495057;\n}\n\n.form-group input {\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e9ecef;\n  border-radius: 8px;\n  font-size: 16px;\n  transition: border-color 0.2s;\n  box-sizing: border-box;\n}\n\n.form-group input:focus {\n  outline: none;\n  border-color: #667eea;\n}\n\n.form-group input.error {\n  border-color: #dc3545;\n}\n\n.password-input {\n  position: relative;\n}\n\n.password-input input {\n  padding-right: 45px;\n}\n\n.password-toggle {\n  position: absolute;\n  right: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n  padding: 4px;\n}\n\n.error-message {\n  color: #dc3545;\n  font-size: 14px;\n  margin-top: 4px;\n}\n\n.form-actions {\n  margin: 30px 0 20px;\n}\n\n.btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  font-size: 16px;\n  font-weight: 500;\n  text-decoration: none;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.btn-primary {\n  background-color: #1233EA;\n  color: white;\n  font-family: 'Inter', sans-serif;\n  font-weight: 500;\n}\n\n.btn-primary:hover:not(:disabled) {\n  background-color: #0f29d1;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(18, 51, 234, 0.3);\n}\n\n.btn-primary:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.btn-full {\n  width: 100%;\n}\n\n.help-links {\n  text-align: center;\n  margin-top: 20px;\n}\n\n.help-links a {\n  color: #1233EA;\n  text-decoration: none;\n  font-size: 14px;\n}\n\n.help-links a:hover {\n  text-decoration: underline;\n}\n\n@media (max-width: 480px) {\n  .login-page {\n    padding: 16px;\n  }\n  \n  .logo {\n    padding: 30px 16px;\n  }\n  \n  .logo h1 {\n    font-size: 1.75rem;\n  }\n  \n  .login-form {\n    padding: 24px 20px;\n  }\n  \n  .form-group input {\n    font-size: 16px; /* Prevent zoom on iOS */\n  }\n}\n</style>\n"],"mappings":";AA2FA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAI;AAClC,SAASC,SAAS,QAAQ,YAAW;AACrC,OAAOC,SAAS,MAAM,4BAA2B;AACjD,OAAOC,gBAAgB,MAAM,mCAAkC;AAC/D,SAASC,YAAY,QAAQ,eAAc;AAC3C,SAASC,oBAAoB,QAAQ,wBAAuB;;;;;;;IAE5D,MAAMC,MAAM,GAAGL,SAAS,CAAC;IACzB,MAAMM,SAAS,GAAGH,YAAY,CAAC;IAC/B,MAAMI,iBAAiB,GAAGH,oBAAoB,CAAC;;IAE/C;IACA,MAAMI,OAAO,GAAGV,GAAG,CAAC,KAAK;IACzB,MAAMW,YAAY,GAAGX,GAAG,CAAC,KAAK;IAC9B,MAAMY,SAAS,GAAGZ,GAAG,CAAC,SAAS,CAAC,EAAC;;IAEjC,MAAMa,QAAQ,GAAGZ,QAAQ,CAAC;MACxBa,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE;IACZ,CAAC;IAED,MAAMC,MAAM,GAAGhB,GAAG,CAAC,CAAC,CAAC;;IAErB;IACA,MAAMiB,YAAY,GAAGA,CAAA,KAAM;MACzBD,MAAM,CAACE,KAAK,GAAG,CAAC;MAEhB,IAAI,CAACL,QAAQ,CAACC,KAAK,EAAE;QACnBE,MAAM,CAACE,KAAK,CAACJ,KAAK,GAAGF,SAAS,CAACM,KAAK,KAAK,OAAO,GAAG,8BAA8B,GAAG,kBAAiB;MACvG;MAEA,IAAI,CAACL,QAAQ,CAACE,QAAQ,EAAE;QACtBC,MAAM,CAACE,KAAK,CAACH,QAAQ,GAAG,mBAAkB;MAC5C;MAEA,OAAOI,MAAM,CAACC,IAAI,CAACJ,MAAM,CAACE,KAAK,CAAC,CAACG,MAAM,KAAK;IAC9C;IAEA,MAAMP,KAAK,GAAG,MAAAA,CAAA,KAAY;MACxB,IAAI,CAACG,YAAY,CAAC,CAAC,EAAE;MAErBP,OAAO,CAACQ,KAAK,GAAG,IAAG;MAEnB,IAAI;QACF,MAAMI,QAAQ,GAAGV,SAAS,CAACM,KAAK,KAAK,OAAO,GAAG,mBAAmB,GAAG,aAAY;QACjF,MAAMK,SAAS,GAAGX,SAAS,CAACM,KAAK,KAAK,OAAO,GACzC;UAAEM,QAAQ,EAAEX,QAAQ,CAACC,KAAK;UAAEC,QAAQ,EAAEF,QAAQ,CAACE;QAAS,IACxD;UAAEU,KAAK,EAAEZ,QAAQ,CAACC,KAAK;UAAEC,QAAQ,EAAEF,QAAQ,CAACE;QAAS;QAEzD,MAAMP,SAAS,CAACM,KAAK,CAACQ,QAAQ,EAAEC,SAAS;;QAEzC;QACA,IAAIf,SAAS,CAACkB,IAAI,CAACC,IAAI,KAAK,OAAO,EAAE;UACnCpB,MAAM,CAACqB,IAAI,CAAC,QAAQ;QACtB,CAAC,MAAM;UACLrB,MAAM,CAACqB,IAAI,CAAC,YAAY;QAC1B;QAEAnB,iBAAiB,CAACoB,eAAe,CAAC;UAChCC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAE;QACX,CAAC;MAEH,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK;QAEpC,IAAIE,YAAY,GAAG,wBAAuB;QAE1C,IAAIF,KAAK,CAACG,QAAQ,EAAEC,MAAM,KAAK,GAAG,EAAE;UAClCF,YAAY,GAAG,yBAAwB;QACzC,CAAC,MAAM,IAAIF,KAAK,CAACG,QAAQ,EAAEC,MAAM,KAAK,GAAG,EAAE;UACzCF,YAAY,GAAGF,KAAK,CAACG,QAAQ,CAACE,IAAI,EAAEN,OAAO,IAAI,iBAAgB;QACjE,CAAC,MAAM,IAAIC,KAAK,CAACG,QAAQ,EAAEC,MAAM,KAAK,GAAG,EAAE;UACzCF,YAAY,GAAGF,KAAK,CAACG,QAAQ,CAACE,IAAI,EAAEN,OAAO,IAAI,6BAA4B;QAC7E,CAAC,MAAM,IAAIC,KAAK,CAACG,QAAQ,EAAEE,IAAI,EAAEN,OAAO,EAAE;UACxCG,YAAY,GAAGF,KAAK,CAACG,QAAQ,CAACE,IAAI,CAACN,OAAM;QAC3C;QAEAtB,iBAAiB,CAACoB,eAAe,CAAC;UAChCC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEG;QACX,CAAC;MACH,CAAC,SAAS;QACRxB,OAAO,CAACQ,KAAK,GAAG,KAAI;MACtB;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}