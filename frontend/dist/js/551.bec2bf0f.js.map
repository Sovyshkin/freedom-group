{"version":3,"file":"js/551.bec2bf0f.js","mappings":"8yBA+FA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAYC,EAAAA,EAAAA,KACZC,GAAoBC,EAAAA,EAAAA,KAGpBC,GAAUC,EAAAA,EAAAA,KAAI,GACdC,GAAeD,EAAAA,EAAAA,KAAI,GACnBE,GAAYF,EAAAA,EAAAA,IAAI,WAEhBG,GAAWC,EAAAA,EAAAA,IAAS,CACxBC,MAAO,GACPC,SAAU,KAGNC,GAASP,EAAAA,EAAAA,IAAI,CAAC,GAGdQ,EAAeA,KACnBD,EAAOE,MAAQ,CAAC,EAEhB,MAAMC,EAAeP,EAASE,MAAMM,OAC9BC,EAAkBT,EAASG,SAASK,OAU1C,OARKD,IACHH,EAAOE,MAAMJ,MAA4B,UAApBH,EAAUO,MAAoB,+BAAiC,8BAGjFG,IACHL,EAAOE,MAAMH,SAAW,qBAGkB,IAArCO,OAAOC,KAAKP,EAAOE,OAAOM,MAAY,EAGzCV,EAAQW,UACZ,GAAKR,IAAL,CAEAT,EAAQU,OAAQ,EAEhB,IACE,MAAMQ,EAA+B,UAApBf,EAAUO,MAAoB,oBAAsB,cAC/DS,EAAgC,UAApBhB,EAAUO,MACxB,CAAEU,SAAUhB,EAASE,MAAMM,OAAQL,SAAUH,EAASG,SAASK,QAC/D,CAAEN,MAAOF,EAASE,MAAMM,OAAQL,SAAUH,EAASG,SAASK,cAE1DhB,EAAUU,MAAMY,EAAUC,GAGJ,UAAxBvB,EAAUyB,KAAKC,KACjB5B,EAAO6B,KAAK,UAEZ7B,EAAO6B,KAAK,cAGdzB,EAAkB0B,gBAAgB,CAChCC,KAAM,UACNC,QAAS,4BAGb,CAAE,MAAOC,GACPC,QAAQD,MAAM,gBAAiBA,GAE/B,IAAIE,EAAe,yBAEY,MAA3BF,EAAMG,UAAUC,OAClBF,EAAe,0BACqB,MAA3BF,EAAMG,UAAUC,OACzBF,EAAeF,EAAMG,SAASE,MAAMN,SAAW,kBACX,MAA3BC,EAAMG,UAAUC,OACzBF,EAAeF,EAAMG,SAASE,MAAMN,SAAW,8BACtCC,EAAMG,UAAUE,MAAMN,UAC/BG,EAAeF,EAAMG,SAASE,KAAKN,SAGrC5B,EAAkB0B,gBAAgB,CAChCC,KAAM,QACNC,QAASG,GAEb,CAAE,QACA7B,EAAQU,OAAQ,CAClB,CA7C2B,CA6C3B,E,gEA9KAuB,EAAAA,EAAAA,IAoFM,MApFNC,EAoFM,EAnFJC,EAAAA,EAAAA,IAgFM,MAhFNC,EAgFM,EA/EJD,EAAAA,EAAAA,IA8EM,MA9ENE,EA8EM,cA7EJF,EAAAA,EAAAA,IAGM,OAHDG,MAAM,SAAO,EAChBH,EAAAA,EAAAA,IAAsB,UAAlB,kBACJA,EAAAA,EAAAA,IAA0B,SAAvB,yBAAmB,KAGxBA,EAAAA,EAAAA,IAuEO,QAvEAI,UAAMC,EAAAA,EAAAA,IAAUlC,EAAK,aAAEgC,MAAM,c,EAElCH,EAAAA,EAAAA,IAeM,MAfNM,EAeM,EAdJN,EAAAA,EAAAA,IAMS,UALPV,KAAK,SACJiB,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEzC,EAAAO,MAAY,WACnB4B,OAAKO,EAAAA,EAAAA,IAAA,gBAAAC,OAA0C,YAAd3C,EAAAO,UACnC,YAED,IACAyB,EAAAA,EAAAA,IAMS,UALPV,KAAK,SACJiB,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEzC,EAAAO,MAAY,SACnB4B,OAAKO,EAAAA,EAAAA,IAAA,gBAAAC,OAA0C,UAAd3C,EAAAO,UACnC,kBAED,MAGFyB,EAAAA,EAAAA,IAUM,MAVNY,EAUM,WATJZ,EAAAA,EAAAA,IAOE,S,qCANS/B,EAASE,MAAKsC,GACvBnB,KAAK,OACLuB,SAAA,GACCC,YAA2B,UAAd9C,EAAAO,MAAwB,mBAAqB,kBAC1D4B,OAAKO,EAAAA,EAAAA,IAAA,EAAAlB,MAAWnB,EAAAE,MAAOJ,OAClB,iB,kBALGF,EAASE,SAOTE,EAAAE,MAAOJ,QAAK,WAAvB2B,EAAAA,EAAAA,IAAoE,MAApEiB,GAAoEC,EAAAA,EAAAA,IAArB3C,EAAAE,MAAOJ,OAAK,uBAG7D6B,EAAAA,EAAAA,IA0BM,MA1BNiB,EA0BM,EAzBJjB,EAAAA,EAAAA,IAuBM,MAvBNkB,EAuBM,WAtBJlB,EAAAA,EAAAA,IAOE,S,qCANS/B,EAASG,SAAQqC,GACzBnB,KAAMvB,EAAAQ,MAAe,OAAS,WAC/BsC,SAAA,GACAC,YAAY,SACXX,OAAKO,EAAAA,EAAAA,IAAA,EAAAlB,MAAWnB,EAAAE,MAAOH,UAClB,iB,kBALGH,EAASG,aAOpB4B,EAAAA,EAAAA,IAaS,UAZPV,KAAK,SACJiB,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAE1C,EAAAQ,OAAgBR,EAAAQ,OACxB4B,MAAM,mB,CAEKpC,EAAAQ,QAAY,WAAvBuB,EAAAA,EAAAA,IAGM,MAHNqB,EAGM,IAAAX,EAAA,KAAAA,EAAA,KAFJR,EAAAA,EAAAA,IAAsM,QAAhMoB,EAAE,wLAAsL,UAC9LpB,EAAAA,EAAAA,IAA2C,QAArCqB,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAAKC,GAAG,M,2BAEjC1B,EAAAA,EAAAA,IAGM,MAHN2B,EAGM,IAAAjB,EAAA,KAAAA,EAAA,KAFJR,EAAAA,EAAAA,IAA8D,QAAxDoB,EAAE,gDAA8C,UACtDpB,EAAAA,EAAAA,IAAuC,UAA/B0B,GAAG,KAAKC,GAAG,KAAKC,EAAE,K,kBAIrBvD,EAAAE,MAAOH,WAAQ,WAA1B0B,EAAAA,EAAAA,IAA0E,MAA1E+B,GAA0Eb,EAAAA,EAAAA,IAAxB3C,EAAAE,MAAOH,UAAQ,uBAGnE4B,EAAAA,EAAAA,IAOS,UANPV,KAAK,SACJwC,SAAUjE,EAAAU,MACX4B,MAAM,a,CAEMtC,EAAAU,QAAO,WAAnBuB,EAAAA,EAAAA,IAA2C,OAA3CiC,KAA2C,6BAC3Cf,EAAAA,EAAAA,IAAGnD,EAAAU,MAAU,UAAY,SAAf,SAGa,YAAdP,EAAAO,QAAS,WAApBuB,EAAAA,EAAAA,IAEM,MAFNkC,EAEM,EADJC,EAAAA,EAAAA,IAA+DC,EAAA,CAAlDC,GAAG,oBAAkB,C,kBAAC,IAAc,IAAA3B,EAAA,KAAAA,EAAA,aAAd,kBAAc,Q,mCAMzDyB,EAAAA,EAAAA,IAAoBG,EAAAA,IAAA,C,aC9ExB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://app/./src/views/auth/LoginPage.vue","webpack://app/./src/views/auth/LoginPage.vue?2f2c"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"container\">\n      <div class=\"login-card\">\n        <div class=\"brand\">\n          <h1>FREEDOM GROUP</h1>\n          <p>Партнерская система</p>\n        </div>\n        \n        <form @submit.prevent=\"login\" class=\"login-form\">\n          <!-- Role selection -->\n          <div class=\"role-selector\">\n            <button \n              type=\"button\"\n              @click=\"loginType = 'partner'\"\n              :class=\"['role-option', { active: loginType === 'partner' }]\"\n            >\n              Партнер\n            </button>\n            <button \n              type=\"button\"\n              @click=\"loginType = 'admin'\"\n              :class=\"['role-option', { active: loginType === 'admin' }]\"\n            >\n              Администратор\n            </button>\n          </div>\n          \n          <div class=\"input-group\">\n            <input\n              v-model=\"formData.login\"\n              type=\"text\"\n              required\n              :placeholder=\"loginType === 'admin' ? 'Имя пользователя' : 'Логин или email'\"\n              :class=\"{ error: errors.login }\"\n              class=\"input-field\"\n            />\n            <div v-if=\"errors.login\" class=\"error-text\">{{ errors.login }}</div>\n          </div>\n          \n          <div class=\"input-group\">\n            <div class=\"password-field\">\n              <input\n                v-model=\"formData.password\"\n                :type=\"showPassword ? 'text' : 'password'\"\n                required\n                placeholder=\"Пароль\"\n                :class=\"{ error: errors.password }\"\n                class=\"input-field\"\n              />\n              <button \n                type=\"button\" \n                @click=\"showPassword = !showPassword\"\n                class=\"password-toggle\"\n              >\n                <svg v-if=\"showPassword\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <path d=\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\"></path>\n                  <line x1=\"1\" y1=\"1\" x2=\"23\" y2=\"23\"></line>\n                </svg>\n                <svg v-else width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n                  <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n                </svg>\n              </button>\n            </div>\n            <div v-if=\"errors.password\" class=\"error-text\">{{ errors.password }}</div>\n          </div>\n          \n          <button \n            type=\"submit\" \n            :disabled=\"loading\"\n            class=\"login-btn\"\n          >\n            <span v-if=\"loading\" class=\"loader\"></span>\n            {{ loading ? 'Вход...' : 'Войти' }}\n          </button>\n          \n          <div v-if=\"loginType === 'partner'\" class=\"forgot-link\">\n            <router-link to=\"/forgot-password\">Забыли пароль?</router-link>\n          </div>\n        </form>\n      </div>\n    </div>\n    \n    <AppNotifications />\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport AppNotifications from '@/components/AppNotifications.vue'\nimport { useAuthStore } from '@/stores/auth'\nimport { useNotificationStore } from '@/stores/notifications'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\nconst notificationStore = useNotificationStore()\n\n// Reactive data\nconst loading = ref(false)\nconst showPassword = ref(false)\nconst loginType = ref('partner') // 'partner' or 'admin'\n\nconst formData = reactive({\n  login: '',\n  password: ''\n})\n\nconst errors = ref({})\n\n// Methods\nconst validateForm = () => {\n  errors.value = {}\n  \n  const trimmedLogin = formData.login.trim()\n  const trimmedPassword = formData.password.trim()\n  \n  if (!trimmedLogin) {\n    errors.value.login = loginType.value === 'admin' ? 'Имя пользователя обязательно' : 'Логин или email обязателен'\n  }\n  \n  if (!trimmedPassword) {\n    errors.value.password = 'Пароль обязателен'\n  }\n  \n  return Object.keys(errors.value).length === 0\n}\n\nconst login = async () => {\n  if (!validateForm()) return\n  \n  loading.value = true\n  \n  try {\n    const endpoint = loginType.value === 'admin' ? '/auth/admin/login' : '/auth/login'\n    const loginData = loginType.value === 'admin' \n      ? { username: formData.login.trim(), password: formData.password.trim() }\n      : { login: formData.login.trim(), password: formData.password.trim() }\n    \n    await authStore.login(endpoint, loginData)\n    \n    // Redirect based on user role\n    if (authStore.user.role === 'admin') {\n      router.push('/admin')\n    } else {\n      router.push('/dashboard')\n    }\n    \n    notificationStore.addNotification({\n      type: 'success',\n      message: 'Успешный вход в систему!'\n    })\n    \n  } catch (error) {\n    console.error('Ошибка входа:', error)\n    \n    let errorMessage = 'Ошибка входа в систему'\n    \n    if (error.response?.status === 401) {\n      errorMessage = 'Неверные учетные данные'\n    } else if (error.response?.status === 403) {\n      errorMessage = error.response.data?.message || 'Доступ запрещен'\n    } else if (error.response?.status === 429) {\n      errorMessage = error.response.data?.message || 'Слишком много попыток входа'\n    } else if (error.response?.data?.message) {\n      errorMessage = error.response.data.message\n    }\n    \n    notificationStore.addNotification({\n      type: 'error',\n      message: errorMessage\n    })\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n<style scoped>\n.login-page {\n  min-height: 100vh;\n  background: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  font-family: 'Inter', sans-serif;\n}\n\n.container {\n  width: 100%;\n  max-width: 480px;\n}\n\n.login-card {\n  background: white;\n  border-radius: 16px;\n  border: 1px solid #f1f3f4;\n  overflow: hidden;\n  animation: fadeIn 0.6s ease-out, levitate 4s ease-in-out infinite;\n  box-shadow: \n    0 25px 50px rgba(0, 0, 0, 0.1),\n    0 15px 35px rgba(0, 0, 0, 0.05),\n    0 5px 15px rgba(0, 0, 0, 0.02);\n  transform: translateY(-5px);\n  transition: all 0.3s ease;\n}\n\n.login-card:hover {\n  animation-play-state: paused;\n  transform: translateY(-10px);\n  box-shadow: \n    0 35px 60px rgba(0, 0, 0, 0.15),\n    0 20px 40px rgba(0, 0, 0, 0.1),\n    0 10px 20px rgba(0, 0, 0, 0.05);\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes levitate {\n  0%, 100% {\n    transform: translateY(-5px) translateX(0);\n  }\n  25% {\n    transform: translateY(-5px) translateX(2px);\n  }\n  50% {\n    transform: translateY(-5px) translateX(0);\n  }\n  75% {\n    transform: translateY(-5px) translateX(-2px);\n  }\n}\n\n.brand {\n  text-align: center;\n  padding: 48px 32px 32px;\n  border-bottom: 1px solid #f1f3f4;\n}\n\n.brand h1 {\n  margin: 0 0 8px;\n  font-size: 24px;\n  font-weight: 600;\n  color: #1a1a1a;\n  letter-spacing: -0.02em;\n}\n\n.brand p {\n  margin: 0;\n  color: #6b7280;\n  font-size: 14px;\n  font-weight: 400;\n}\n\n.login-form {\n  padding: 32px;\n}\n\n.role-selector {\n  display: flex;\n  background: #f9fafb;\n  border-radius: 12px;\n  padding: 4px;\n  margin-bottom: 24px;\n  border: 1px solid #f3f4f6;\n}\n\n.role-option {\n  flex: 1;\n  padding: 12px 16px;\n  border: none;\n  background: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  color: #6b7280;\n  transition: all 0.2s ease;\n}\n\n.role-option.active {\n  background: white;\n  color: #1a1a1a;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n}\n\n.input-group {\n  margin-bottom: 20px;\n}\n\n.input-field {\n  width: 100%;\n  padding: 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 400;\n  color: #1a1a1a;\n  background: white;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n}\n\n.input-field::placeholder {\n  color: #9ca3af;\n}\n\n.input-field:focus {\n  outline: none;\n  border-color: #1233EA;\n  box-shadow: 0 0 0 3px rgba(18, 51, 234, 0.1);\n}\n\n.input-field.error {\n  border-color: #ef4444;\n  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);\n}\n\n.password-field {\n  position: relative;\n}\n\n.password-field .input-field {\n  padding-right: 52px;\n}\n\n.password-toggle {\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #9ca3af;\n  padding: 4px;\n  border-radius: 6px;\n  transition: color 0.2s ease;\n}\n\n.password-toggle:hover {\n  color: #6b7280;\n}\n\n.error-text {\n  color: #ef4444;\n  font-size: 14px;\n  margin-top: 8px;\n  font-weight: 400;\n}\n\n.login-btn {\n  width: 100%;\n  background: #1233EA;\n  color: white;\n  border: none;\n  padding: 16px 24px;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  min-height: 52px;\n}\n\n.login-btn:hover:not(:disabled) {\n  background: #0f29d1;\n}\n\n.login-btn:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n\n.loader {\n  width: 16px;\n  height: 16px;\n  border: 2px solid transparent;\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.forgot-link {\n  text-align: center;\n}\n\n.forgot-link a {\n  color: #1233EA;\n  text-decoration: none;\n  font-size: 14px;\n  font-weight: 500;\n  transition: color 0.2s ease;\n}\n\n.forgot-link a:hover {\n  color: #0f29d1;\n}\n\n@media (max-width: 480px) {\n  .login-page {\n    padding: 16px;\n  }\n  \n  .brand {\n    padding: 40px 24px 24px;\n  }\n  \n  .brand h1 {\n    font-size: 22px;\n  }\n  \n  .login-form {\n    padding: 24px;\n  }\n  \n  .input-field {\n    font-size: 16px; /* Prevent zoom on iOS */\n  }\n}\n</style>\n","import script from \"./LoginPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=56f2aab9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-56f2aab9\"]])\n\nexport default __exports__"],"names":["router","useRouter","authStore","useAuthStore","notificationStore","useNotificationStore","loading","ref","showPassword","loginType","formData","reactive","login","password","errors","validateForm","value","trimmedLogin","trim","trimmedPassword","Object","keys","length","async","endpoint","loginData","username","user","role","push","addNotification","type","message","error","console","errorMessage","response","status","data","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","class","onSubmit","_withModifiers","_hoisted_4","onClick","_cache","$event","_normalizeClass","active","_hoisted_5","required","placeholder","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_11","d","x1","y1","x2","y2","_hoisted_12","cx","cy","r","_hoisted_13","disabled","_hoisted_15","_hoisted_16","_createVNode","_component_router_link","to","AppNotifications","__exports__"],"sourceRoot":""}